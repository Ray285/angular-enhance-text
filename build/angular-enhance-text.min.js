!function(a){"use strict";a.module("bernhardposselt.enhancetext",["ngSanitize"]).provider("enhanceTextFilter",function(){function b(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var c={cache:!0,newLineToBr:!0,embedLinks:!0,embeddedLinkTarget:"_blank",embedImages:!0,embeddedImagesHeight:void 0,embeddedImagesWidth:void 0,embedVideos:!0,embeddedVideosHeight:void 0,embeddedVideosWidth:void 0,embedYoutube:!0,embeddedYoutubeHeight:void 0,embeddedYoutubeWidth:void 0,smilies:{}},d={};this.setOptions=function(b){a.extend(c,b)};var e=function(b,c){var d="";return a.isDefined(b)&&(d+='height="'+b+'" '),a.isDefined(c)&&(d+='width="'+c+'" '),d};this.$get=["$sanitize","$sce",function(f,g){return function(h){var i=h;if(c.cache){var j=d[h];if(a.isDefined(j))return j}h=f(h);for(var k=Object.keys(c.smilies),l=0;l<k.length;l++){var m=k[l],n=c.smilies[m],o='<img alt="'+m+'" src="'+n+'"/>',p=" "+b(m)+" ";h=h.replace(new RegExp(p)," "+o+" ");var q="^"+b(m)+"$";h=h.replace(new RegExp(q),o);var r=" "+b(m)+"$";h=h.replace(new RegExp(r)," "+o);var s="^"+b(m)+" ";h=h.replace(new RegExp(s),o+" ");var t=" "+b(m)+"&#10;";h=h.replace(new RegExp(t)," "+o+"&#10;");var u="&#10;"+b(m)+"&#10;";h=h.replace(new RegExp(u),"&#10;"+o+"&#10;");var v="&#10;"+b(m)+"$";h=h.replace(new RegExp(v),"&#10;"+o);var w="^"+b(m)+"&#10;";h=h.replace(new RegExp(w),o+"&#10;");var x="&#10;"+b(m)+" ";h=h.replace(new RegExp(x),"&#10;"+o+" ");var y="&#10;"+b(m)+"$";h=h.replace(new RegExp(y),"&#10;"+o);var z="&#10;"+b(m)+"&#10;";h=h.replace(new RegExp(z),"&#10;"+o+"&#10;")}if(c.embedImages){var A=/((?:https?):\/\/\S*\.(?:gif|jpg|jpeg|tiff|png|svg|webp))/gi,B=e(c.embeddedImagesHeight,c.embeddedImagesWidth),C='<a href="$1" target="'+c.embeddedLinkTarget+'"><img '+B+'alt="image" src="$1"/></a>';h=h.replace(A,C)}if(c.embedVideos){var D=/((?:https?):\/\/\S*\.(?:ogv|webm))/gi,E=e(c.embeddedVideosHeight,c.embeddedVideosWidth),F="<video "+E+'src="$1" controls preload="none"></video>';h=h.replace(D,F)}if(c.embedYoutube){var G=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/ytscreeningroom\?v=|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\S*[^\w\-\s]))([\w\-]{11})[?=&+%\w-]*/gi,H=e(c.embeddedYoutubeHeight,c.embeddedYoutubeWidth),I="<iframe "+H+'src="https://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>';h=h.replace(G,I)}if(c.newLineToBr&&(h=h.replace("/\n/g","<br/>").replace(/&#10;/g,"<br/>")),c.embedLinks){var J=/((href|src)=["']|)(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;h=h.replace(J,function(){return arguments[1]?arguments[0]:'<a target="'+c.embeddedLinkTarget+'" href="'+arguments[3]+'">'+arguments[3]+"</a>"})}return h=g.trustAsHtml(h),c.cache&&(d[i]=h),h}}]})}(angular,void 0);