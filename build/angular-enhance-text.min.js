!function(a){"use strict";function b(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function c(b,c){var d="";return a.isDefined(b)&&(d+='height="'+b+'" '),a.isDefined(c)&&(d+='width="'+c+'" '),d}var d=a.module("bernhardposselt.enhancetext",["ngSanitize"]).provider("enhanceTextFilter",function(){var b={cache:!0,newLineToBr:!0,embedLinks:!0,embeddedLinkTarget:"_blank",embedImages:!0,embeddedImagesHeight:void 0,embeddedImagesWidth:void 0,embedVideos:!0,embeddedVideosHeight:void 0,embeddedVideosWidth:void 0,embedYoutube:!0,embeddedYoutubeHeight:void 0,embeddedYoutubeWidth:void 0,smilies:{}},c={};this.setOptions=function(c){a.extend(b,c)},this.$get=["$sanitize","$sce","SmileyEnhancer","VideoEnhancer","NewLineEnhancer","ImageEnhancer","YouTubeEnhancer","LinkEnhancer",function(d,e,f,g,h,i,j,k){return function(l){var m=l;if(b.cache){var n=c[l];if(a.isDefined(n))return n}return l=d(l),l=f(l,b.smilies),b.embedImages&&(l=i(l,b.embeddedImagesHeight,b.embeddedVideosWidth,b.embeddedLinkTarget)),b.embedVideos&&(l=g(l,b.embeddedImagesHeight,b.embeddedVideosWidth)),b.embedYoutube&&(l=j(l,b.embeddedYoutubeHeight,b.embeddedYoutubeWidth)),b.newLineToBr&&(l=h(l)),b.embedLinks&&(l=k(l,b.embeddedLinkTarget)),l=e.trustAsHtml(l),b.cache&&(c[m]=l),l}}]});d.factory("ImageEnhancer",function(){return function(a,b,d,e){void 0===e&&(e="_blank");var f=/((?:https?):\/\/\S*\.(?:gif|jpg|jpeg|tiff|png|svg|webp))/gi,g=c(b,d),h='<a href="$1" target="'+e+'"><img '+g+'alt="image" src="$1"/></a>';return a.replace(f,h)}}),d.factory("LinkEnhancer",function(){return function(a,b){void 0===b&&(b="_blank");var c=/((href|src)=["']|)(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return a.replace(c,function(){return arguments[1]?arguments[0]:'<a target="'+b+'" href="'+arguments[3]+'">'+arguments[3]+"</a>"})}}),d.factory("NewLineEnhancer",function(){return function(a){return a.replace(/\n/g,"<br/>").replace(/&#10;/g,"<br/>")}}),d.factory("SmileyEnhancer",function(){return function(a,c){for(var d=Object.keys(c),e=a.split("&#10;"),f=function(a,c,d){var e="^"+b(a)+" ",f=" "+b(a)+"$",g=" "+b(a)+" ",h="^"+b(a)+"$";return d.replace(new RegExp(e),c+" ").replace(new RegExp(f)," "+c).replace(new RegExp(g)," "+c+" ").replace(new RegExp(h),c)},g=0;g<d.length;g++){var h=d[g],i='<img alt="'+h+'" src="'+c[h]+'"/>',j=f.bind(null,h,i);e=e.map(j)}return e.join("&#10;")}}),d.factory("VideoEnhancer",function(){return function(a,b,d){var e=/((?:https?):\/\/\S*\.(?:ogv|webm))/gi,f=c(b,d),g="<video "+f+'src="$1" controls preload="none"></video>';return a.replace(e,g)}}),d.factory("YouTubeEnhancer",function(){return function(a,b,d){var e=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/ytscreeningroom\?v=|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\S*[^\w\-\s]))([\w\-]{11})[?=&+%\w-]*/gi,f=c(b,d),g="<iframe "+f+'src="https://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>';return a.replace(e,g)}})}(angular,void 0);