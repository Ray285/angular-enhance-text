!function(a){"use strict";a.module("bernhardposselt.enhancetext",["ngSanitize"]).provider("enhanceTextFilter",function(){function b(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var c={cache:!0,newLineToBr:!0,embedLinks:!0,embeddedLinkTarget:"_blank",embedImages:!0,embeddedImagesHeight:void 0,embeddedImagesWidth:void 0,embedVideos:!0,embeddedVideosHeight:void 0,embeddedVideosWidth:void 0,embedYoutube:!0,embeddedYoutubeHeight:void 0,embeddedYoutubeWidth:void 0,smilies:{}},d={};this.setOptions=function(b){a.extend(c,b)};var e=function(b,c){var d="";return a.isDefined(b)&&(d+='height="'+b+'" '),a.isDefined(c)&&(d+='width="'+c+'" '),d};this.$get=["$sanitize","$sce",function(f,g){return function(h){var i=h;if(c.cache){var j=d[h];if(a.isDefined(j))return j}h=f(h);for(var k=Object.keys(c.smilies),l=function(a){var c="^"+b(n)+" ",d=" "+b(n)+"$",e=" "+b(n)+" ",f="^"+b(n)+"$";return a.replace(new RegExp(c),p+" ").replace(new RegExp(d)," "+p).replace(new RegExp(e)," "+p+" ").replace(new RegExp(f),p)},m=0;m<k.length;m++){var n=k[m],o=c.smilies[n],p='<img alt="'+n+'" src="'+o+'"/>';h=h.split("&#10;").map(l).join("&#10;")}if(c.embedImages){var q=/((?:https?):\/\/\S*\.(?:gif|jpg|jpeg|tiff|png|svg|webp))/gi,r=e(c.embeddedImagesHeight,c.embeddedImagesWidth),s='<a href="$1" target="'+c.embeddedLinkTarget+'"><img '+r+'alt="image" src="$1"/></a>';h=h.replace(q,s)}if(c.embedVideos){var t=/((?:https?):\/\/\S*\.(?:ogv|webm))/gi,u=e(c.embeddedVideosHeight,c.embeddedVideosWidth),v="<video "+u+'src="$1" controls preload="none"></video>';h=h.replace(t,v)}if(c.embedYoutube){var w=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/ytscreeningroom\?v=|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\S*[^\w\-\s]))([\w\-]{11})[?=&+%\w-]*/gi,x=e(c.embeddedYoutubeHeight,c.embeddedYoutubeWidth),y="<iframe "+x+'src="https://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>';h=h.replace(w,y)}if(c.newLineToBr&&(h=h.replace("/\n/g","<br/>").replace(/&#10;/g,"<br/>")),c.embedLinks){var z=/((href|src)=["']|)(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;h=h.replace(z,function(){return arguments[1]?arguments[0]:'<a target="'+c.embeddedLinkTarget+'" href="'+arguments[3]+'">'+arguments[3]+"</a>"})}return h=g.trustAsHtml(h),c.cache&&(d[i]=h),h}}]})}(angular,void 0);