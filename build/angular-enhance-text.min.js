!function(a){"use strict";a.module("bernhardposselt.enhancetext",["ngSanitize"]).provider("enhanceTextFilter",function(){function b(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var c={cache:!0,newLineToBr:!0,embedLinks:!0,embeddedLinkTarget:"_blank",embedImages:!0,embeddedImagesHeight:void 0,embeddedImagesWidth:void 0,embedVideos:!0,embeddedVideosHeight:void 0,embeddedVideosWidth:void 0,embedYoutube:!0,embeddedYoutubeHeight:void 0,embeddedYoutubeWidth:void 0,smilies:{}},d={};this.setOptions=function(b){a.extend(c,b)},this.$get=["$sanitize","$sce",function(e,f){return function(g){var h=g;if(c.cache){var j=d[g];if(a.isDefined(j))return j}g=e(g);var k=Object.keys(c.smilies);for(i=0;i<k.length;i++){var l=k[i],m=c.smilies[l],n='<img alt="'+l+'" src="'+m+'"/>',o=" "+b(l)+" ";g=g.replace(new RegExp(o)," "+n+" ");var p="^"+b(l)+"$";g=g.replace(new RegExp(p),n);var q=" "+b(l)+"$";g=g.replace(new RegExp(q)," "+n);var r=" "+b(l)+"&#10;";g=g.replace(new RegExp(r)," "+n+"&#10;")}if(c.embedImages){var s=/((?:https?):\/\/\S*\.(?:gif|jpg|jpeg|tiff|png|svg|webp))/gi,t="";a.isDefined(c.embeddedImagesHeight)&&(t+='height="'+c.embeddedImagesHeight+'" '),a.isDefined(c.embeddedImagesWidth)&&(t+='width="'+c.embeddedImagesWidth+'" ');var u='<a href="$1" target="'+c.embeddedLinkTarget+'"><img '+t+'alt="image" src="$1"/></a>';g=g.replace(s,u)}if(c.embedVideos){var v=/((?:https?):\/\/\S*\.(?:ogv|webm))/gi,w="";a.isDefined(c.embeddedVideosHeight)&&(w+='height="'+c.embeddedVideosHeight+'" '),a.isDefined(c.embeddedVideosWidth)&&(w+='width="'+c.embeddedVideosWidth+'" ');var x="<video "+w+'src="$1"></video>';g=g.replace(v,x)}if(c.embedYoutube){var y=/(?:https?):\/\/(?:www\.)?youtube.com\/\S*watch\?v=([a-zA-Z0-9]*)\S*/gi,z="";a.isDefined(c.embeddedYoutubeHeight)&&(z+='height="'+c.embeddedYoutubeHeight+'" '),a.isDefined(c.embeddedYoutubeWidth)&&(z+='width="'+c.embeddedYoutubeWidth+'" ');var A="<iframe "+z+'src="https://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>';g=g.replace(y,A)}if(c.newLineToBr&&(g=g.replace("/\n/g","<br/>").replace("&#10;","<br/>")),c.embedLinks){var B=/((href|src)=["']|)(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;g=g.replace(B,function(){return arguments[1]?arguments[0]:'<a target="'+c.embeddedLinkTarget+'" href="'+arguments[3]+'">'+arguments[3]+"</a>"})}return f.trustAsHtml(g),c.cache&&(d[h]=g),g}}]})}(angular,void 0);