!function(a){"use strict";var b=a.module("bernhardposselt.enhancetext",["ngSanitize"]).provider("enhanceTextFilter",function(){function a(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var b={},c={},d=!0,e=!0,f=!0;this.setSmilies=function(a){b=a},this.enableCaching=function(a){d=a},this.enableReplaceNewLines=function(a){e=a},this.enableReplaceLinks=function(a){f=a},this.$get=["$sanitize","$filter","$sce",function(g,h,j){return function(k){var l=k;if(d){var m=c[k];if(void 0!==m)return m}k=g(k);var n=Object.keys(b);for(i=0;i<n.length;i++){var o=n[i],p=b[o],q='<img alt="'+o+'" src="'+p+'"/>',r=" "+a(o)+" ";k=k.replace(new RegExp(r)," "+q+" ");var s="^"+a(o)+"$";k=k.replace(new RegExp(s),q);var t=" "+a(o)+"$";k=k.replace(new RegExp(t)," "+q);var u=" "+a(o)+"&#10;";k=k.replace(new RegExp(u)," "+q+"&#10;")}return e&&(k=h("newLine")(k)),f&&(k=h("unsanitizedLink")(k,"_blank")),j.trustAsHtml(k),d&&(c[l]=k),k}}]});b.filter("newLine",function(){return function(a){return a.replace("/\n/g","<br/>").replace("&#10;","<br/>")}}),b.filter("unsanitizedLink",function(){var b=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,c=/^mailto:/;return function(d,e){function f(a){a&&l.push(a)}function g(b,c){l.push("<a "),a.isDefined(e)&&(l.push('target="'),l.push(e),l.push('" ')),l.push('href="'),l.push(b),l.push('">'),f(c),l.push("</a>")}if(!d)return d;for(var h,i,j,k=d,l=[];h=k.match(b);)i=h[0],h[2]==h[3]&&(i="mailto:"+i),j=h.index,f(k.substr(0,j)),g(i,h[0].replace(c,"")),k=k.substring(j+h[0].length);return f(k),l.join("")}})}(angular,void 0);